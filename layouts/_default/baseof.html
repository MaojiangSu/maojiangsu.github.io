{{- if lt hugo.Version "0.147.2" }}
{{- errorf "=> hugo v0.147.2 or greater is required for hugo-PaperMod to build " }}
{{- end -}}

<!DOCTYPE html>
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}">

<head>
  {{- partial "head.html" . }}

  {{ if .IsPage }}
    <!-- Google Scholar Metadata (safe version, no kindIs) -->
    <meta name="citation_title" content="{{ .Title | html }}">

    {{/* authors: author / authors / .Authors / .Author，统一成列表后遍历 */}}
    {{ $rawAuthors := or .Params.author (or .Params.authors (or .Authors .Author)) }}
    {{ if $rawAuthors }}
      {{ $list := cond (reflect.IsSlice $rawAuthors) $rawAuthors (slice $rawAuthors) }}
      {{ range $list }}
        {{ if (reflect.IsMap .) }}
          {{ with .name }}<meta name="citation_author" content="{{ . | html }}">{{ end }}
          {{ with .Name }}<meta name="citation_author" content="{{ . | html }}">{{ end }}
        {{ else }}
          <meta name="citation_author" content="{{ . | html }}">
        {{ end }}
      {{ end }}
    {{ end }}

    {{ with or .PublishDate .Date .Params.date }}
      <meta name="citation_publication_date" content="{{ .Format "2006/01/02" }}">
    {{ end }}

    {{ if .Params.conference }}
      <meta name="citation_conference_title" content="{{ .Params.conference | html }}">
    {{ else if .Params.journal }}
      <meta name="citation_journal_title" content="{{ .Params.journal | html }}">
    {{ else if .Params.booktitle }}
      <meta name="citation_conference_title" content="{{ .Params.booktitle | html }}">
    {{ else }}
      {{ with .Params.editPost }}
        {{ with .Text }}<meta name="citation_conference_title" content="{{ . | html }}">{{ end }}
      {{ end }}
    {{ end }}

    {{ if .Params.pdf }}
      <meta name="citation_pdf_url" content="{{ .Params.pdf }}">
    {{ else if .Params.pdf_url }}
      <meta name="citation_pdf_url" content="{{ .Params.pdf_url }}">
    {{ else if .Params.pdf_file }}
      <meta name="citation_pdf_url" content="{{ printf "%s%s" site.BaseURL .Params.pdf_file }}">
    {{ else if .Params.paper }}
      <meta name="citation_pdf_url" content="{{ .Params.paper }}">
    {{ else }}
      {{ with .Resources.GetMatch "**/*.pdf" }}
        <meta name="citation_pdf_url" content="{{ .Permalink }}">
      {{ end }}
    {{ end }}

    {{ with .Params.doi }}<meta name="citation_doi" content="{{ . }}">{{ end }}
    {{ with (or .Params.arxiv .Params.arXiv) }}<meta name="citation_arxiv" content="{{ . }}">{{ end }}
  {{ end }}
</head>





<body class="
{{- if (or (ne .Kind `page` ) (eq .Layout `archives`) (eq .Layout `search`)) -}}
{{- print "list" -}}
{{- end -}}
{{- if eq site.Params.defaultTheme `dark` -}}
{{- print " dark" }}
{{- end -}}
" id="top">
    {{- if not .IsHome  }}
    {{- partialCached "header.html" . .Page -}}
    {{- end }}
    <main class="main">
        {{- block "main" . }}{{ end }}
    </main>
    {{ partialCached "footer.html" . .Layout .Kind (.Param "hideFooter") (.Param "ShowCodeCopyButtons") -}}
</body>
</html>
